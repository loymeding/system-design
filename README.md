# Сайт заказа услуг. Вариант №4.

# Оглавление
1. [Постановка задачи](#постановка-задачи)
2. [Контекст задачи](#контекст-задачи)
3. [Документация](#документация)
4. [Развертывание](#развертывание)

# Постановка задачи

## Лабораторная работа №1

1. Напишите один-два ключевых варианта использования вашей системы
2. Определите приоритет в нефункциональных требованиях (производительность,
   безопасность, надежность …)
3. Создайте диаграмму контекста в Structruizr DSL
4. Определите основные контейнеры и создайте модели и диаграмму контекста
   на языке Structurizr DSL
5. Определите технологии и проставьте их на контейнерах и связях
6. Создайте одну диаграмму dynamic для архитектурно значимого варианта
   использования.


## Лабораторная работа №2
1. Создайте сервис на Python который реализует сервисы, спроектированные в первом задании (по проектированию). Должно быть реализовано как минимум два сервиса (управления пользователем, и хотя бы один «бизнес» сервис)
2. Сервис должен поддерживать аутентификацию с использованием JWT-token
3. Сервис должен реализовывать как минимум GET/POST методы
4. Данные сервиса должны храниться в памяти
5. В целях проверки должен быть заведён мастер-пользователь (имя admin, пароль secret)

## Дополнение лабораторной работы №3
6. Данные должны храниться в СУБД PostgreSQL
7. Должны быть созданы таблицы для каждой сущности из вашего задания
8. Должен быть создан скрипт по созданию базы данных и таблиц, а также
наполнению СУБД тестовыми значениями
9. Для сущности, должны быть созданы запросы к БД (CRUD) согласно ранее
разработанной архитектуре
10. Данные о пользователе должны включать логин и пароль. Пароль должен
храниться в закрытом виде (хэширован) – в этом задании опционально
11. Должно применяться индексирования по полям, по которым будет
производиться поиск 

## Дополнение лабораторной работы №4
12. Одна из сущностей должна храниться в mongoDB
13. Сервис должен осуществлять создание и чтение нужного документа из mongoDB
14. Должны быть построены индексы соответственно критерию запроса

## Дополнение лабораторной работы №5
15. Одна из сущностей, которая хранится в PostgreSQL должна кешироваться в Redis (в моем случае - **Routs**)
16. Реализовать паттерн «сквозное чтение» для работы с Redis

## Дополнение лабораторной работы №6
17. Реализовать паттерн CQRS для одной из сущностей (в моем случае - **Routs**)
18. Метод POST должен публиковать сообщение о создании в очередь kafka, отдельный сервис должен читать сообщения и записывать их в базу

Работа должны содержать docker-compose.yml, который:
- запускает приложение app в контейнере (собирается из dockerfile), которое выполняет вариант задания
- запускает базу данных PostgreSQL, MongoDB и Redis в отдельных контейнере
- проводит первоначальную инициализацию баз данных
---

# Контекст задачи
## Вариант 4: Сайт заказа услуг

### Приложение должно содержать следующие данные:

- Пользователь
- Услуга
- Заказ

### Реализовать API
Приложение должно реализовать следующие API:

- Создание нового пользователя
- Поиск пользователя по логину
- Поиск пользователя по маске имя и фамилии
- Создание услуги
- Получение списка услуг
- Добавление услуг в заказ
- Получение заказа для пользователя


# Документация

## Сценарии использования
1. Поиск и заказ услуги.
2. Управление услугами исполнителя.

## Нефункциональные требования
1. Надежность: Данные заказов не должны теряться.
2. Производительность: Быстрая обработка запросов.
3. Безопасность: Конфиденциальность данных.
4. Масштабируемость: Возможность роста системы.

## Архитектура

![](https://github.com/loymeding/system-design/blob/main/structurizr/img1.png)

![](https://github.com/loymeding/system-design/blob/main/structurizr/img2.png)


# Развёртывание

```bash
docker-compose up -d
```
